<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehicle Audit Report</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        * { 
            box-sizing: border-box; 
            -webkit-print-color-adjust: exact; 
            print-color-adjust: exact; 
        }

        body { background-color: #525659; margin: 0; padding: 10px; display: flex; flex-direction: column; align-items: center; }
        
        #report {
            width: 100%;
            max-width: 210mm;
            min-height: 297mm;
            padding: 10mm;
            background: white;
            font-family: Arial, sans-serif;
            font-size: 9pt;
            display: flex;
            flex-direction: column;
            border: 1px solid #000;
        }

        h1 { text-align: center; text-decoration: underline; font-size: 14pt; margin: 0 0 10px 0; }
        
        .section-table { width: 100%; border-collapse: collapse; margin-bottom: 5px; }
        .section-table td { border: 1px solid black; padding: 4px; vertical-align: middle; width: 50%; }
        .label { font-weight: bold; }
        
        input[type="text"] { border: none; border-bottom: 1px solid #eee; width: 65%; font-size: 9pt; outline: none; }

        .checklist-container { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            border-top: 1px solid black; 
            border-left: 1px solid black;
        }
        
        @media (max-width: 500px) {
            .checklist-container { grid-template-columns: 1fr; }
        }

        .check-item { 
            border-right: 1px solid black; 
            border-bottom: 1px solid black; 
            padding: 2px 8px; 
            display: flex; 
            justify-content: space-between; 
            font-size: 8pt;
            height: 22px;
            align-items: center;
        }

        .yn-group { display: flex; gap: 5px; align-items: center; }
        .yn-group label { font-size: 7pt; margin-right: 2px; }

        .review-header { background: #f2f2f2; border: 1px solid black; border-top: none; padding: 3px; font-weight: bold; text-align: center; }
        .review-row { display: flex; border: 1px solid black; border-top: none; padding: 2px 8px; align-items: center; font-size: 8pt; }
        .review-row span { width: 45%; }
        
        .tyre-grid { display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; width: 100%; border: 1px solid black; border-top: none; font-size: 8pt; }
        .tyre-col { border-right: 1px solid black; padding: 4px; display: flex; flex-direction: column; align-items: center; }
        .tyre-col:last-child { border-right: none; }
        .tyre-col select { width: 95%; margin-top: 2px; }

        select { 
            width: 55%; 
            font-size: 8pt; 
            border: 1px solid #ccc; 
            border-radius: 2px;
            padding: 1px;
        }

        .photo-container {
            width: 100%;
            height: 150px;
            border: 1px solid black;
            border-top: none;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background: #fafafa;
        }
        #vehicle-photo { max-height: 100%; max-width: 100%; display: none; }

        .footer-table { margin-top: auto; width: 100%; border-collapse: collapse; }
        .footer-table td { border: 1px solid black; padding: 5px; vertical-align: top; }
        
        .sig-container {
            width: 100%;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin-top: 5px;
        }
        /* Style for the permanent signature image */
        #permanent-sig-img { max-height: 70px; max-width: 100%; object-fit: contain; }

        .btn-group { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 10px; width: 100%; max-width: 210mm; }
        .dl-btn { background: #27ae60; color: white; border: none; padding: 12px 24px; cursor: pointer; font-weight: bold; border-radius: 4px; font-size: 11pt; flex: 1; min-width: 200px; }
        .cam-btn { background: #2980b9; color: white; border: none; padding: 12px 24px; cursor: pointer; font-weight: bold; border-radius: 4px; font-size: 11pt; flex: 1; min-width: 200px; }
        
        @media print { 
            body { padding: 0; background: white; }
            #report { width: 210mm; border: 1px solid #000; box-shadow: none; }
            .btn-group, select::-ms-expand, #photo-input { display: none; } 
            select { border: none; -webkit-appearance: none; -moz-appearance: none; appearance: none; color: black; }
        }
    </style>
</head>
<body>

    <div class="btn-group">
        <button class="cam-btn" onclick="document.getElementById('photo-input').click()">ðŸ“¸ UPLOAD LIVE PHOTO</button>
        <button class="dl-btn" onclick="downloadPDF()">DOWNLOAD REPORT (A4 FORMAT)</button>
    </div>

    <input type="file" id="photo-input" accept="image/*" style="display: none;" onchange="previewVehiclePhoto(event)">

    <div id="report">
        <h1>Vehicle Audit Report</h1>

        <table class="section-table">
            <tr>
                <td><span class="label">Vehicle No:</span> <input type="text"></td>
                <td><span class="label">Route Name:</span> <input type="text"></td>
            </tr>
            <tr>
                <td><span class="label">Contractor:</span> <input type="text"></td>
                <td><span class="label">Driver Name:</span> <input type="text"></td>
            </tr>
            <tr>
                <td><span class="label">Capacity:</span> <input type="text"></td>
                <td><span class="label">Vehicle Shift:</span> <input type="text"></td>
            </tr>
        </table>

        <div class="review-header">Vehicle Live Photo</div>
        <div class="photo-container">
            <img id="vehicle-photo" src="" alt="Vehicle Photo">
        </div>

        <div class="checklist-container">
            <div class="check-item">Jack <div class="yn-group"><label>Y</label><input type="radio" name="jack"> <label>N</label><input type="radio" name="jack"></div></div>
            <div class="check-item">Internal Light <div class="yn-group"><label>Y</label><input type="radio" name="light"> <label>N</label><input type="radio" name="light"></div></div>
            <div class="check-item">Fire Extinguisher <div class="yn-group"><label>Y</label><input type="radio" name="fire"> <label>N</label><input type="radio" name="fire"></div></div>
            <div class="check-item">First Aid Kit <div class="yn-group"><label>Y</label><input type="radio" name="aid"> <label>N</label><input type="radio" name="aid"></div></div>
            <div class="check-item">Spanner <div class="yn-group"><label>Y</label><input type="radio" name="spanner"> <label>N</label><input type="radio" name="spanner"></div></div>
            <div class="check-item">Log Book <div class="yn-group"><label>Y</label><input type="radio" name="log"> <label>N</label><input type="radio" name="log"></div></div>
            <div class="check-item">Tomy <div class="yn-group"><label>Y</label><input type="radio" name="tomy"> <label>N</label><input type="radio" name="tomy"></div></div>
            <div class="check-item">Music System <div class="yn-group"><label>Y</label><input type="radio" name="music"> <label>N</label><input type="radio" name="music"></div></div>
            
            <div class="review-row"><span>Registration Certificate</span> <input type="text" style="width: 55%; border-bottom: 1px solid #ccc;"></div>
            
            <div class="check-item">Toolkit <div class="yn-group"><label>Y</label><input type="radio" name="toolkit"> <label>N</label><input type="radio" name="toolkit"></div></div>
            <div class="check-item">Uniform <div class="yn-group"><label>Y</label><input type="radio" name="uniform"> <label>N</label><input type="radio" name="uniform"></div></div>
            
            <div class="review-row"><span>PUC</span> <input type="text" style="width: 55%; border-bottom: 1px solid #ccc;"></div>
            
            <div class="check-item">Shoes <div class="yn-group"><label>Y</label><input type="radio" name="shoes"> <label>N</label><input type="radio" name="shoes"></div></div>
            <div class="check-item">Seat Caps <div class="yn-group"><label>Y</label><input type="radio" name="caps"> <label>N</label><input type="radio" name="caps"></div></div>
            
            <div class="review-row"><span>Insurance</span> <input type="text" style="width: 55%; border-bottom: 1px solid #ccc;"></div>
            
            <div class="check-item">Seat Handle <div class="yn-group"><label>Y</label><input type="radio" name="handle"> <label>N</label><input type="radio" name="handle"></div></div>
            <div class="check-item">Battery <div class="yn-group"><label>Y</label><input type="radio" name="battery"> <label>N</label><input type="radio" name="battery"></div></div>
            
            <div class="review-row"><span>Fitness</span> <input type="text" style="width: 55%; border-bottom: 1px solid #ccc;"></div>
            
            <div class="check-item">Eme. Window <div class="yn-group"><label>Y</label><input type="radio" name="window"> <label>N</label><input type="radio" name="window"></div></div>
            <div class="check-item">Wiper <div class="yn-group"><label>Y</label><input type="radio" name="wiper"> <label>N</label><input type="radio" name="wiper"></div></div>
            
            <div class="review-row"><span>Tax</span> <input type="text" style="width: 55%; border-bottom: 1px solid #ccc;"></div>
            
            <div class="check-item">Seat Belt <div class="yn-group"><label>Y</label><input type="radio" name="belt"> <label>N</label><input type="radio" name="belt"></div></div>
            <div class="check-item">Mirrors <div class="yn-group"><label>Y</label><input type="radio" name="mirror"> <label>N</label><input type="radio" name="mirror"></div></div>
            
            <div class="review-row"><span>Permit</span> <input type="text" style="width: 55%; border-bottom: 1px solid #ccc;"></div>
            
            <div class="check-item">Spare Wheel <div class="yn-group"><label>Y</label><input type="radio" name="wheel"> <label>N</label><input type="radio" name="wheel"></div></div>
            <div class="check-item">Foot Mat <div class="yn-group"><label>Y</label><input type="radio" name="mat"> <label>N</label><input type="radio" name="mat"></div></div>
            <div class="check-item">Driver License <div class="yn-group"><label>Y</label><input type="radio" name="license"> <label>N</label><input type="radio" name="license"></div></div>
            <div class="check-item">Policies <div class="yn-group"><label>Y</label><input type="radio" name="policies"> <label>N</label><input type="radio" name="policies"></div></div>
            <div class="check-item">Emer. Door operation <div class="yn-group"><label>Y</label><input type="radio" name="door"> <label>N</label><input type="radio" name="door"></div></div>
            <div class="check-item">Sanitizer Bottle <div class="yn-group"><label>Y</label><input type="radio" name="sanitizer"> <label>N</label><input type="radio" name="sanitizer"></div></div>
        </div>

        <div class="review-header">Operations / Review</div>
        
        <div class="review-row"><span>Engine starting and smoothness</span> 
            <select><option>Good</option><option>Poor</option><option>Not Working</option></select>
        </div>
        <div class="review-row"><span>Stearing</span> 
            <select><option>Good</option><option>Poor</option><option>Not Working</option></select>
        </div>
        <div class="review-row"><span>Clutch & Breake</span> 
            <select><option>Good</option><option>Poor</option><option>Not Working</option></select>
        </div>
        <div class="review-row"><span>Gear</span> 
            <select><option>Good</option><option>Poor</option><option>Not Working</option></select>
        </div>
        <div class="review-row"><span>Suspension</span> 
            <select><option>Good</option><option>Poor</option><option>Not Working</option></select>
        </div>
        <div class="review-row"><span>Light, Horn</span> 
            <select><option>Good</option><option>Poor</option><option>Not Working</option></select>
        </div>
        <div class="review-row"><span>All Door and Window</span> 
            <select><option>Good</option><option>Poor</option><option>Not Working</option></select>
        </div>
        <div class="review-row"><span>Oil Leakage</span> 
            <select><option>Good</option><option>Poor</option><option>Not Working</option></select>
        </div>

        <div class="review-header" style="border-top: none;">TYRE CONDITIONS</div>
        <div class="tyre-grid">
            <div class="tyre-col">
                <b>Front Left</b>
                <select><option>Good</option><option>Poor</option><option>Not Working</option></select>
            </div>
            <div class="tyre-col">
                <b>Front Right</b>
                <select><option>Good</option><option>Poor</option><option>Not Working</option></select>
            </div>
            <div class="tyre-col">
                <b>Rear Left</b>
                <select><option>Good</option><option>Poor</option><option>Not Working</option></select>
            </div>
            <div class="tyre-col">
                <b>Rear Right</b>
                <select><option>Good</option><option>Poor</option><option>Not Working</option></select>
            </div>
        </div>

        <div class="review-row"><span>Driver Behaviour</span> 
            <select><option>Satisfactory</option><option>Good</option><option>Poor</option><option>Not Working</option></select>
        </div>
        <div class="review-row"><span>Cleaning of the Vehicle</span> 
            <select><option>Satisfactory</option><option>Good</option><option>Poor</option><option>Not Working</option></select>
        </div>
        <div class="review-row"><span>Other Remark</span> <input type="text" style="width: 55%; border-bottom: 1px solid #ccc;"></div>

        <table class="footer-table">
            <tr>
                <td><span class="label">Audited By:</span> Vrushal Chobhe</td>
                <td><span class="label">Date:</span> <span id="dt"></span></td>
            </tr>
            <tr>
                <td colspan="2">
                    <span class="label">Transport Officer Sign:</span>
                    <div class="sig-container">
                        <img id="permanent-sig-img" src="sign.jpg" alt="Officer Signature">
                    </div>
                </td>
            </tr>
        </table>
    </div>

    <script>
        document.getElementById('dt').innerText = new Date().toLocaleDateString('en-GB');

        function previewVehiclePhoto(event) {
            const reader = new FileReader();
            reader.onload = function() {
                const output = document.getElementById('vehicle-photo');
                output.src = reader.result;
                output.style.display = 'block';
            };
            if(event.target.files[0]) {
                reader.readAsDataURL(event.target.files[0]);
            }
        }

        function downloadPDF() {
            const element = document.getElementById('report');
            const opt = {
                margin: 0,
                filename: 'Bus_Audit_Report.pdf',
                image: { type: 'jpeg', quality: 1 },
                html2canvas: { scale: 2, useCORS: true },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };
            html2pdf().set(opt).from(element).save();
        }
    </script>
</body>
</html>
